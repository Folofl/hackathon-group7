<!doctype html>

<html lang="en">

<head>
  <link href="https://fonts.googleapis.com/css?family=Gloria+Hallelujah|Noto+Sans" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Questrial" rel="stylesheet">
  <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <title>Amazon/GDI Hackathon: Group 7</title>
    <link rel="shortcut icon" href="../images/favicon.ico" type="image/x-icon">
    <link href="css/style.css" rel="stylesheet"/>
    <meta charset="utf-8">
    <script
src="https://code.jquery.com/jquery-3.2.1.min.js"
integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
crossorigin="anonymous"></script>
</head>

<body>
  <div class="main-app">
    <h1>ShopMe! App</h1>
    <p>Add an item to your shopping list below!</p>

    <p>
      Item Needed:
    </p>
    <input id="item">
    <p>
      Quantity:
    </p>
    <input id="quantity"><br>
    <!-- <p>
      Notes:
    </p>
    <textarea id="notes"></textarea><br> -->
    <button id="addItem">Add Me</button>

    <p class="today-list">
      Today's List:
      <ul id="groceryList"></ul>
    </p>
  </div>
</body>

<!-- CSS BELOW -->
<style>

body{
  width:45%;
  margin:auto;
  color:black;
  font-family: 'Questrial', sans-serif;
}
.main-app{
  background-color:#5DADE2;
  padding:7%;
  border-radius:10px;
  border:solid 1px white;
  padding-bottom:50px;
}
h1{
  font-size:48px;
  font-family:'Gloria Hallelujah', cursive;
}
.today-list{
  font-size:30px;
  font-family: 'Gloria Hallelujah', cursive;
}
button{
  font-family: 'Questrial', sans-serif;
  font-size: 20px;
  border-radius:5px;
  margin-top:15px;
  width:120px;
  clear:both;
}
#groceryList{
  list-style:none;
}
ul li{
  font-size: 25px;
}
p{
  font-size:25px;
}
#nameDiv{
  width:100px;
  float:left;
}

</style>

<!-- javascript below -->
<script type="text/javascript">

document.getElementById("addItem").onclick = addingItem;

function editItem() {
  // get parent, which is the list item
  var listItem = $(this).parent();
  // get access to nameDiv
  var nameDiv = listItem.find("#nameDiv");
  // backup the value
  var itemName = nameDiv.attr("name");
  // put backed up value into the new input field
  var nameInput = document.createElement("input");
  nameInput.setAttribute("id", "nameInput");
  nameInput.setAttribute("name", itemName);
  nameInput.setAttribute("value", itemName);
  // delete nameDiv and replace it with input field
  listItem.find("#nameDiv").replaceWith(nameInt);

  // create the save button
  var saveButton = document.createElement("button");
  saveButton.innerHTML = "Save";
  saveButton.setAttribute("id", "saveButton");
  saveButton.onclick = saveItem;

  $(this).replaceWith(saveButton);
}

function saveItem() {
  // get parent
  console.log("in save");
  var listItem = $(this).parent();
  // get access to inputs
  var nameInput = listItem.find("#nameInput");
  var itemName = nameInput.val();
  //var itemName = nameInput.attr("name");
  // console.log(itemName);
  // transform them back into div
  var nameDiv = document.createElement("div");
  nameDiv.setAttribute("id", "nameDiv");
  nameDiv.setAttribute("name", itemName);
  nameDiv.innerHTML = itemName;
  listItem.find("#nameInput").replaceWith(nameDiv);
  // change name of this button to "Edit"
  $(this).text("Edit");
  // replace onclick of this button with editItem
  $(this).click(editItem);
}

function deleteItem() {
  $(this).parent().remove();
}

function addingItem() {

  // create variable to grab the grocery item input value
  // create variable to grab the unordered list from the html

  var itemName     = document.getElementById("item").value;
  var itemQuantity = document.getElementById("quantity").value;
  var groceryList  = document.getElementById("groceryList");

  // create a list item node
  var listItem     = document.createElement("li");
  var nameDiv      = document.createElement("div");
  var quantityDiv  = document.createElement("div");
  var editButton   = document.createElement("button");
  var deleteButton = document.createElement("button");
  var checkBox     = document.createElement("input");

  // Name
  nameDiv.innerHTML = itemName;
  nameDiv.setAttribute("id", "nameDiv");
  nameDiv.setAttribute("name", itemName);

  // Quantity
  quantityDiv.innerHTML = itemQuantity;
  quantityDiv.setAttribute("id", "quanityDiv");

  // Edit button
  editButton.innerHTML = "Edit";
  editButton.setAttribute("id", "editButton");
  editButton.onclick = editItem;

  // Delete Button
  deleteButton.innerHTML = "<i class='fa fa-bomb' aria-hidden='true'></i>";
  deleteButton.setAttribute("id", "deleteButton");
  deleteButton.onclick = deleteItem;

  // Checkbox button

  // Append the grocery list item to the unordered list
  listItem.appendChild(nameDiv);
  listItem.appendChild(quantityDiv);
  listItem.appendChild(editButton);
  listItem.appendChild(deleteButton);
  groceryList.appendChild(listItem);

  // Clear input value below for the user!
  document.getElementById("item").value     = "";
  document.getElementById("quantity").value = "";
}

</script>
</html>
